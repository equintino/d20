<script>
  function myFunction(){
    var x = document.getElementById('mySelect').value;
      document.getElementById('aqui').innerHTML='<img height=240px src="../web/imagens/personagens/'+x+'/'+x+'.png" />';
    if(x=='humano'){
      var y = 'Humanos uma raça muito comum e muitas vezes escolhida, boa para iniciantes no RPG, é uma raça neutra, sem benefícios ou malefícios, os humanos não tem nenhuma vantagem ou poder melhor que as outras raças, mas também não tem nenhuma desvantagem.Podem ter várias cores de pele, cabelos e olhos e chegar até 2,20m ';
    }
    if(x=='elfo'){
      var y = 'Elfos  são pessoas de uma raça mística com aparência humanóide geralmente belos e loiros. São mais baixos e menos fortes, porém mais rápidos e habilidosos que os humanos. Há quem diga que são Semi-Deuses e Imortais.São seres mágicos, ligados à natureza, o que os diferencia de Magos e Feiticeiros, que advém do estudo das artes arcanas por outras raças.São excelentes arqueiros e possuem natural aptidão para as magias da Natureza.';
    }
    if(x=='anao'){
      var y = 'Os anões demoram a sorrir, ou a brincar e suspeitam muito de estranhos, mas são generosos com os poucos que ganham sua confiança. Eles valorizam o ouro, as gemas, as jóias e os objetos de arte feitos com esses materiais preciosos e muitos já sucumbiram ao poder da ambição. Eles não combatem nem tímida, nem temerariamente, mas com coragem e tenacidade cuidadosas. Seu senso de justiça é forte, mas pode se transformar em uma sede de vingança. Entre os gnomos, que são conhecidos por se darem bem com os anões, é comum dizerem o seguinte juramento: “Se estou mentindo, que eu enraiveça um anão”.';
    }
    if(x=='halfling'){
      var y = 'Como raça amigável, tentam se dar bem com todas as outras raças, mesmo assim, não que dizer que considerem todos amigos, no geral consideram amigos verdadeiros apenas os de sua própria raça; porém quando fazem amigos sem ser de sua espécie, são extremamente leais, mostrando ferocidade quando esse amigo está em perigo. Vivem no geral em comunidades pacificas, com grandes fazendas e bosques, nunca construíram um reino próprio, nem reconhecem qualquer tipo de nobreza dos de sua espécie, procurando sempre os anciões de sua família em busca de orientação, essa base construída em cima da família ajudou os halflings a mantes suas tradições por milhares de anos, independente do que estivesse ocorrendo no reino. Criaturas que querem se dar bem com todos, possuem no geral alinhamento leal e bom, não gostando de ver os outros sofrerem ou passar por opressão, mantendo sempre um forte as suas tradições, assim como os velhos hábitos e conforto. A divindade dos Halflings é Yondalla O Abençoado, o protetor dos halflings, a língua usada por ele é um idioma próprio. Como dito anteriormente, eles se aventuram mais com propósitos de proteger a comunidade, família e amigos, porém em uma batalha, por seu tamanho reduzido, usam mais de astúcia e furtividade do que força bruta ou mágia.'
    }
    document.getElementById('aqui.texto').innerHTML=y;
  }
  function dica(){
    var x = "DICA... \r\n     Use sua imaginação. A primeira coisa a fazer é escolher um conceito, uma idéia básica. O que seu personagem vai ser? Um guerreiro bárbaro com um machado mágico e uma pele de pantera jogada sobre os ombros? Um feiticeiro caçador de monstros? Um lutador de rua em busca de vingança? Um elfo caçador de recompensas? Você pode ser tudo isso e qualquer outra coisa que imaginar.";
   alert(x);
  }
</script>
<style>
	#rodape{
		visibility: hidden;
	}
</style>
<?php 
    $variaveis=array('JOGADOR'=>'jogador','PERSONAGEM'=>'personagem','RAÇA'=>'raca','CLASSE'=>'classe','TENDÊNCIA1'=>'tendencia1','TENDÊNCIA2'=>'tendencia2','SEXO'=>'sexo');
    $act=$_GET['act'];
    @$x=$_GET['pag'];
    @$classe=$_GET['classe'];
    @$personagem=$_GET['personagem'];
    $y=$x+2;
        if($x==0){ 
           $class='class="disabled"';
        }else{
           $class='title=RECUAR';
        }
?>
<div  class="conteudo" >
    <div>
        <?php if($act=='lista'):?>
               <?php 
                  $dao=new Dao();
                  $search=new ModelSearchCriteria();
                  $search->settabela('personagem');
                  $lista=$dao->encontre($search);
                  @$level=$_GET['level'];
                  if(!$level){
                     $level=1; 
                  }
                  $titulos=array('PERSONAGEM','RAÇA','CLASSE','TENDÊNCIA1','TENDÊNCIA2');
                  //echo count($lista);die;
                  echo '<div class=paginacao>';
                    echo 'Páginas ';
                    echo ($x)+1 .' de ';
                    echo ceil(count($lista));
                  echo '</div>';
                  if(($x)+1 == ceil(count($lista))){
                     $class2='class=disabled';
                  }else{
                     $class2='title="AVANÇAR"';
                  }
        echo '<fieldset class=lista><legend><a href='.Utils::createLink('cadastro',array('act'=>'lista','pag'=>$x-1)).' '.$class.' ><< </a> FICHA DE PERSONAGEM <a href='.Utils::createLink('cadastro',array('act'=>'lista','pag'=>$x+1,'contador'=>count($lista))).' '.$class2.'> >> </a>&nbsp&nbsp LEVEL '.$level.'</legend>';
           echo '<table cellspacing=0 border=1>';
                  foreach($lista as $keys => $item){
                    if($x < $keys && $keys < $y){
                     echo '<tr><td class=nomes>'.$titulos[0].'</td><td class=nomes2><a href='.Utils::createLink('ficha', array('personagem'=>$item->getpersonagem())).'>'.$item->getpersonagem().'<span class=verFicha><br>(ver ficha)</span></a></td></tr>';
                     echo '<tr><td class=nomes>'.$titulos[1].'</td><td class=nomes2>'.$item->getraca().'</td></tr>';
                     echo '<tr><td class=nomes>'.$titulos[2].'</td><td class=nomes2>'.$item->getclasse().'</td></tr>';
                     echo '<tr><td class=nomes>'.$titulos[3].'</td><td class=nomes2>'.$item->gettendencia1().'</td></tr>';
                     echo '<tr><td class=nomes>'.$titulos[4].'</td><td class=nomes2>'.$item->gettendencia2().'</td></tr>';
                     //echo '<tr><td colspan=2 class=divisao>&nbsp</td><tr>';
                     echo '<div id="aqui" class="raca">Bem-vindo '.strtoupper($item->getjogador()).'  <img height=240px src="../web/imagens/personagens/'.$item->getraca().'/'.$item->getraca().'.png" /></div>';
                       //print_r($item);die;
                     //$y++;
                    }elseif($keys > $y){
                       break;
                    }
                  }
                       echo '</table>';
      echo '</fieldset>';
               ?>
        <?php elseif($act=='cad'): ?>
        <script>dica();</script>
        <fieldset class="cad">
            <legend>CADASTRO DE PERSONAGEM</legend>
         <form class="font_1" id="cadastro" action="../paginas/add.php?act=cad" method="POST">
         <table>
             <?php foreach($variaveis as $keys => $item){
                if($item=='raca'){
                  echo '<tr><td align=right> '.$keys.': </td>';
                    echo '<td><select id="mySelect" name=raca onchange="myFunction()">';
                      echo '<option>&nbsp</option>';
                      echo '<option value=humano>HUMANO</option>';
                      echo '<option value=anao>ANÃO</option>';
                      echo '<option value=elfo>ELFO</option>';
                      echo '<option value=halfling>HALFLING</option>';
                    echo '</select></td></tr>';
                }elseif($item=='classe'){
                   echo '<tr><td align=right> '.$keys.': </td>';
                    echo '<td><select name=classe>';
                      echo '<option>&nbsp</option>';
                      echo '<option value=bruxo>BRUXO</option>';
                      echo '<option value=guerreiro>GUERREIRO</option>';
                      echo '<option value=gatuno>GATUNO</option>';
                      echo '<option value=sacerdote>SACERDOTE</option>';
                      echo '<option value=paladino>PALADINO</option>';
                      echo '<option value=arqueiro>ARQUEIRO</option>';
                      echo '<option value=mago>MAGO</option>';
                    echo '</select></td></tr>';
                 }elseif($item=='tendencia1'){
                  echo '<tr><td align=right> '.$keys.': </td>';
                    echo '<td><select name=tendencia1>';
                      echo '<option>&nbsp</option>';
                      echo '<option value=bom>BOM</option>';
                      echo '<option value=neutro>NEUTRO</option>';
                      echo '<option value=mau>MAU</option>';
                    echo '</select></td></tr>';
                 }elseif($item=='tendencia2'){
                  echo '<tr><td align=right> '.$keys.': </td>';
                    echo '<td><select name=tendencia2>';
                      echo '<option>&nbsp</option>';
                      echo '<option value=leal>LEAL</option>';
                      echo '<option value=neutro>NEUTRO</option>';
                      echo '<option value=caótico>CAÓTICO</option>';
                    echo '</select></td></tr>';
                 }elseif($item=='sexo'){
                  echo '<tr><td align=right> '.$keys.': </td>';
                    echo '<td><input type=radio name=sexo value=M> MASCULINO';
                    echo ' <input type=radio name=sexo value=F> FEMININO</td></tr>';
                 }else{
                    echo "<tr><td align=\"right\"> $keys: </td><td><input type=\"text\" name=\"".$item."\" size=\"40\" / required></td></tr>";
                 }
             }
             echo '<div id="aqui" class="raca"></div>';
             echo '<div id="aqui.texto" align="justify" class="texto"></div>';
             ?>
         </table>
            <div><input type="submit" value="GRAVA" class='botao botao-verde2'>
               &nbsp<input type="reset" value="LIMPA" class='botao2 botao-verde'></div>
            </form>
        </fieldset>
        <?php elseif($act=='cad2'): ?>
        <fieldset class="cad">
            <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
         <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad2&personagem=<?php echo $personagem ?>" method="POST">
             <table class="cadCont">
             <?php
               switch ($classe){
                case 'guerreiro':
                    $habilidades['guerreiro']=array('s01-ARREMESSO PODDEROSO','ta1-ATAQUE DE BÚFALO','a01-ATAQUE GIRATÓRIO','a02-ATAQUE SIMULTÂNEO','ta2-ATAQUE DO TROVÃO','s02-BRIGÃO','r01-COMBATE TÁTICO','r02-COMBATE EM GRUPO','s03-DEFLETOR','s04-FORÇA DE COMBATE','a03-GOLPE DEVASTADOR','tr1-GOLPE COM ESCUDO','a04-GRITO DE GUERRA','a05-INVESTIDA MORTAL','a06-KNOCK OUT','ta3-QUEBRA-ESCUDO','tr2-SEM ESCAPATÓRIA','s05-PERNAS FORTES','s06-PROTEGER ALIADO');
                    break;
                case 'paladino':
                    $habilidades['paladino']=array('ts1-ANIMAL CELESTIAL 1','ts2-ANIMAL CELESTIAL 2','a01-ATAQUE GIRATÁRIO','tr1-AURA DIVINA','ts3-CAVALEIRO EXPERIENTE','r01-COMBATE TÁTICO','ts4-CONFIANÇA NOS DEUSES','ts5-CORPO SANTO','ta1-EXORCISMO','s01-FORÇA DE COMBATE','a02-GRITO DE GUERRA','ts6-INQUISITOR','ts7-INVESTIDA MONTADA','a03-INVESTIDA MORTAL','a04-JUSTIÇA FINAL','a05-KNOCK OUT','ts8-MONTARIA ESPECIAL 1','ts9-MONTARIA ESPECIAL 2','ta2-TOQUE DE CURA');
                    break;
               }
              if(@$habilidades){
                foreach($habilidades as $key => $item){
                  echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($key).'</div>';
                  echo '<div align=right class=cadTitulo>Escolha três habilidades para '.strtoupper($personagem).'&nbsp&nbsp</div>';
                  $y=count($item)/3;
                  $x=0;
                  //echo $y.'<br>';
                  echo '<table class=bloco>';
                    echo '<tr>';
                      for($x=$x;$x<count($item);$x++){
                        echo '<td><input type=checkbox name=\''.$item[$x].'\'> <span class=habLista>'.substr($item[$x],4).'</span>';
                        echo '</td>';
                        switch ($x){
                          case 3:
                          case 7:
                          case 11:
                          case 15:
                          case 19:
                          case 23:
                          case 27;
                          echo '</tr><tr>';
                          break;
                        }
                      }
                      echo '</tr>';
                      /*$y=$y-3;
                      for($x=$x;$x<$y;$x++){
                        echo '<td><input type=radio name='.substr($item[$x],4).'> '.substr($item[$x],4);
                        echo '</td>';
                      }*/
                    echo '</tr></table>';
                }
              }
                echo '<br><div align=center class=cadTitulo>Nos fale um pouco sobre '.strtoupper($personagem).'</div>';
                echo '<div class=cadHistoria>';
                echo '<label>Idade: </label>';
                echo '<input type=text size=2 name=idade>anos';
                echo '<label> Altura: </label>';
                echo '<input type=text size=2 name=altura>m';
                echo '<label> Peso: </label>';
                echo '<input type=text size=2 name=peso>Kg';
                echo '<label> Cidade Natal: </label>';
                echo '<input type=text name=cidade>';
                echo '<br><br>';
                echo '<label> Fale sobre a origem, os costumes e cultura do seu povo: </label>';
                echo '<br>';
                echo '<textarea rows="4" cols="79" name=breveHistoria></textarea>';
				echo '<br>';
                echo '<label> O porquê entrou nesta aventura? </label>';
                echo '<br>';
                echo '<textarea rows="4" cols="79" name=motivacao></textarea>';
                echo '</div>';
             ?>
                 <div>
                     <!--<input type="reset" value="LIMPA" class='cad2Hab cad2Hab-verde'>
               &nbsp--><input type="submit" value="AVANÇA" class='cad2Hab cad2Hab-verde'>                       </div>
         </table>
        </form>
        </fieldset>
        <?php elseif($act=='cad3'): 
            $dao=new Dao();
            $search=new ModelSearchCriteria();
            $search->settabela('atributos');
            $search->setpersonagem($_GET['personagem']);
            $atrib=$dao->encontrePorPersonagem($search);
            //print_r($atrib->getPV());
            //print_r($lista->getpe());die;
        ?>
        <fieldset class="cad">
            <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
         <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad3&personagem=<?php echo $personagem ?>" method="POST">
             <table class="cadCont">
             <?php
                  echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($_GET['classe']).'</div>';
				  echo '<div class="moeda cadTitulo">$ 400</div>';
                  echo '<div align=right class=cadTitulo>Atributos, Armamentos & Equipamentos para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
				  
                       echo '<table class=atributo>';
                       echo '<caption class=fichaTitulo>Atributos</caption>';
                       $tCaracteristicas=array('F'=>'Força','A'=>'Agilidade','I'=>'Inteligência','V'=>'Vontade','PV'=>'Pontos de Vida','PM'=>'Pontos de Magia','PE'=>'Pontos de Experiência');
                       foreach($tCaracteristicas as $key => $item_){
                         if($item_[0] == 'P'){
                           $item_=(explode(' ',$item_));
                           echo '<tr><td><span class="destaque atr">'.$item_[0][0].'</span>'.substr($item_[0], 1).' '.$item_[1].'<span class="destaque atr"> ';
                           if($item_[2][0]=='V'||$item_[2][0]=='M'){ 
                               echo  $item_[2][0].'</span>'.substr($item_[2], 1).'</td><td><input type=text name='.$key.' maxlength = "4" size=2 ';
                               if($atrib->getPV()==0&&$atrib->getPM()==0){
                                   echo 'value="60">';
                               }elseif($item_[2][0]=='V'){
                                   echo 'value='.$atrib->getPV().'>';
                               }elseif($item_[2][0]=='M'){
                                   echo 'value='.$atrib->getPM().'>';
                               }
                               echo '</td></tr>';
                            }else{
                               echo  $item_[2][0].'</span>'.substr($item_[2], 1).'</td><td><input type=text name='.$key.' maxlength = "4" size=2 ';
                               echo 'value='.$atrib->getPE().'>';
                            }
                         }else{
                          echo '<tr><td><span class="destaque atr">'.$item_[0].'</span>'. substr($item_, 1).'</td><td><input type=text name='.$key.' maxlength = "4" size=2 value=';
                           if($item_[0]=='F'){
                             echo $atrib->getF();
                           }elseif($item_[0]=='A'){
                             echo $atrib->getA();
                           }elseif($item_[0]=='I'){
                             echo $atrib->getI();
                           }elseif($item_[0]=='V'){
                             echo $atrib->getV();
                           }
                           echo '></td></tr>';
                         }
                       }
                       echo '</table>';
             ?>
				<div>
                    <input type="reset" value="LIMPA" class='cad3Hab cad3Hab-verde'>
					<input type="submit" value="AVANÇA" class='cad3Hab cad3Hab-verde'>                     
				</div>
         </table>
        </form>
        </fieldset>
        <?php endif; ?>
    </div>
</div>