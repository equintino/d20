<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>
    //acrescimoGlobal=0;
    idavatar=1;
    function functionSexoClasse(){
        raca = document.getElementById('mySelect').value;
        classe = document.getElementById('myClasse').value;
        sexo = document.getElementsByName('sexo');
        for(i=0;i<sexo.length;i++){
            if(sexo[0].checked==true){
                sexo = 'M';
            }else if(sexo[1].checked==true){
                sexo = 'F';
            }else{
                sexo = false;
            }
        }
        link = '../web/imagens/personagens/'+raca+'/'+classe+'/'+sexo+'/'+idavatar+'.png';
        if(raca != false && classe != false && sexo != false){
            document.getElementById('aqui').innerHTML='<img height=200px src='+link+' />';
        }
        document.cookie = "avatar="+link+"; path=/";
    }
  function myFunction(){
        raca = document.getElementById('mySelect').value;
        classe = document.getElementById('myClasse').value;
        sexo = document.getElementsByName('sexo');
        for(i=0;i<sexo.length;i++){
            if(sexo[0].checked==true){
               sexo = 'M';
            }else if(sexo[1].checked==true){
               sexo = 'F';
            }
        }
        link = '../web/imagens/personagens/'+raca+'/'+classe+'/'+sexo+'/'+idavatar+'.png';
    if(classe != false && raca != false && sexo != false){
         document.getElementById('aqui').innerHTML='<img height=200px src='+link+' />';
    }
    if(raca=='humano'){
      var y = 'Humanos uma raça muito comum e muitas vezes escolhida, boa para iniciantes no RPG, é uma raça neutra, sem benefícios ou malefícios, os humanos não tem nenhuma vantagem ou poder melhor que as outras raças, mas também não tem nenhuma desvantagem.Podem ter várias cores de pele, cabelos e olhos e chegar até 2,20m ';
    }
    if(raca=='elfo'){
      var y = 'Elfos  são pessoas de uma raça mística com aparência humanóide geralmente belos e loiros. São mais baixos e menos fortes, porém mais rápidos e habilidosos que os humanos. Há quem diga que são Semi-Deuses e Imortais.São seres mágicos, ligados à natureza, o que os diferencia de Magos e Feiticeiros, que advém do estudo das artes arcanas por outras raças.São excelentes arqueiros e possuem natural aptidão para as magias da Natureza.';
    }
    if(raca=='anao'){
      var y = 'Os anões demoram a sorrir, ou a brincar e suspeitam muito de estranhos, mas são generosos com os poucos que ganham sua confiança. Eles valorizam o ouro, as gemas, as jóias e os objetos de arte feitos com esses materiais preciosos e muitos já sucumbiram ao poder da ambição. Eles não combatem nem tímida, nem temerariamente, mas com coragem e tenacidade cuidadosas. Seu senso de justiça é forte, mas pode se transformar em uma sede de vingança. Entre os gnomos, que são conhecidos por se darem bem com os anões, é comum dizerem o seguinte juramento: “Se estou mentindo, que eu enraiveça um anão”.';
    }
    if(raca=='halfling'){
      var y = 'Como raça amigável, tentam se dar bem com todas as outras raças, mesmo assim, não que dizer que considerem todos amigos, no geral consideram amigos verdadeiros apenas os de sua própria raça; porém quando fazem amigos sem ser de sua espécie, são extremamente leais, mostrando ferocidade quando esse amigo está em perigo. Vivem no geral em comunidades pacificas, com grandes fazendas e bosques, nunca construíram um reino próprio, nem reconhecem qualquer tipo de nobreza dos de sua espécie, procurando sempre os anciões de sua família em busca de orientação, essa base construída em cima da família ajudou os halflings a mantes suas tradições por milhares de anos, independente do que estivesse ocorrendo no reino. Criaturas que querem se dar bem com todos, possuem no geral alinhamento leal e bom, não gostando de ver os outros sofrerem ou passar por opressão, mantendo sempre um forte as suas tradições, assim como os velhos hábitos e conforto. A divindade dos Halflings é Yondalla O Abençoado, o protetor dos halflings, a língua usada por ele é um idioma próprio. Como dito anteriormente, eles se aventuram mais com propósitos de proteger a comunidade, família e amigos, porém em uma batalha, por seu tamanho reduzido, usam mais de astúcia e furtividade do que força bruta ou mágia.';
    }
    document.getElementById('aqui.texto').innerHTML=y;
    document.cookie = "avatar="+link+"; path=/";
  }
  function dica(){
    var x = "DICA... \r\n     Use sua imaginação. A primeira coisa a fazer é escolher um conceito, uma idéia básica. O que seu personagem vai ser? Um guerreiro bárbaro com um machado mágico e uma pele de pantera jogada sobre os ombros? Um feiticeiro caçador de monstros? Um lutador de rua em busca de vingança? Um elfo caçador de recompensas? Você pode ser tudo isso e qualquer outra coisa que imaginar.";
   alert(x);
  }
 function verificarCheckBox() {
    var check = document.getElementsByName(1); 
    for (var i=0;i<check.length;i++){ 
        if (check[i].checked === true){ 
            alert('CheckBox Marcado... Faça alguma coisa...');

        }  else {
           alert('CheckBox Não Marcado... Faça alguma outra coisa...');
        }
    }
}
function valida(){
    var todos_inputs = document.getElementsByTagName('input'); 
    for (var i=0; i<todos_inputs.length; i++){
        if(todos_inputs[i].checked){
          var custo = custo + todos_inputs[i].id;
          alert(custo);
             if(todos_inputs[i].checked == true){
                   var ok = true;
                   break;
             }
             else
                   var ok = false;
         }
     }
     if (ok == false){
     alert('Selecione a(s) bebida(s) preferida(s)!');
     document.orcamento.bebi1.focus();
     return false;
     }
     alert("Contato enviado com sucesso, em breve entraremos em contato!");
     document.orcamento.submit();
}
function moeda2(valor){
    var x=400-valor;
    document.getElementById('moeda').innerHTML=x;
}

function moeda(saldo) {
    var custo = document.forms[0];
    var saldo;
    var compra = "";
    var i;
    var novoSaldo;
    var checadoOk;
    var checados = new Array();
    var checado;
    for (i = 0; i < custo.length; i++) {
        if (custo[i].checked) {
            compra = (compra*1) + (custo[i].value*1);
            checados.push (i);
            checado = i;
        } 
    }
    if(saldo-compra < 0){
        alert('Você não tem recursos suficiente.');
        novoSaldo = saldo;
        for (i = 0; i < custo.length; i++) {
            custo[i].checked = false;
        }
        
    }else{
        checadosOk = checados;
        novoSaldo = saldo-compra;
    }
    document.getElementById("moeda").innerHTML = novoSaldo;
}
function isNumber(val){
  return typeof val === "number";
}
function habilidades(){  
    var x = document.forms[0];
    var txt = "";
    var i;
    for (i = 0; i < x.length; i++) {
        if(x[i].checked){
            txt = txt + x.elements[i].name;
            if(txt.slice(-1) > 1){
                for(z=i; txt.slice(-1) > 1; z--){
                        x.elements[z].checked=true;
                        txt = txt + x.elements[z].name;
                }
            }
        }       
    }
            //alert(txt.slice(-1));
}
function abrir(URL) {
  var width = 150;
  var height = 250;
  var left = 99;
  var top = 99;
  window.open(URL,'janela', 'width='+width+', height='+height+', top='+top+', left='+left+', scrollbars=yes, status=no, toolbar=no, location=no, directories=no, menubar=no, resizable=no, fullscreen=no');
}
function mudaImagem(max){
    //alert([raca,classe,sexo]);
    
     switch (raca){
        case 'humano':
            alert(raca);
            switch (classe){
                case 'espadachim':
                    alert(classe);
                    switch (sexo){
                        case 'F':
                            alert(sexo);
                            break;
                        case 'M':
                            alert(sexo);
                            break;
                    }
                    break;
                case 'guerreiro':
                    alert(classe);
                    break;
                case 'paladino':
                    alert(classe);
                    break;
                case 'ranger':
                    alert(classe);
                    break;
                case 'gatuno':
                    alert(classe);
                    break;
                case 'mago':
                    alert(classe);
                    break;
                case 'sacerdote':
                    alert(classe);
                    break;
            }
            break;
        case 'anao':
            alert(raca);
            break;
        case 'elfo':
            alert(raca);
            break;
        case 'halfling':
            alert(raca);
            break;
    }
    //idavatar;
    //alert(idavatar);
    if(idavatar==null){
        idavatar=1;
    }
   //idavatar = idavatar++;
   var max;
   if(max==null){
       max = 5;
   }
   var link = 'imagens/personagens/'+raca+'/'+classe+'/'+sexo+'/'+idavatar+'.png';
   if(idavatar > max-1){
      idavatar=1;
   }else{
      idavatar++;
   }
   var x = '<img height=200px src=\'imagens/personagens/'+raca+'/'+classe+'/'+sexo+'/'+idavatar+'.png\' \>';
         //document.getElementById('aqui').innerHTML='<img height=200px src="../web/imagens/personagens/'+x+'/'+classe+'/'+sexo+'/1.png" />';
   raca;
   //var trocaAvatar = "<a href='index.php?pagina=cadastro&act=avatar&raca="+x+"' onclick='submit'><font size=2>Trocar Avatar</font></a>";
   document.getElementById("aqui").innerHTML=x;
   document.cookie = "avatar="+link+"; path=/";
}
   $(document).ready(function(){
        $("#aqui").fadeIn("slow");

    
    $('#trocaAvatar').click(function(event){
        event.preventDefault();
        $("#aqui").hide();
        //$(".ocultar").hide("slower")
    });
    
    $('#trocaAvatar').click(function(event){
        event.preventDefault();
        $("#aqui").fadeIn("slow");
        //$(".ocultar").show("slower");
    });
 });
function trocaAvatar(x){
    var x;
    var estilo = document.querySelector('#trocaAvatar').style;
    estilo.cursor = 'pointer';
    estilo.color = 'red';
    estilo.fontWeight = '700';
    estilo.textShadow = '0 2px 0 black';
    document.getElementById('trocaAvatar').innerHTML = x;
}
</script>
<style>
	#rodape{
		visibility: hidden;
	}
</style>
<?php 
    $variaveis=array('JOGADOR'=>'jogador','PERSONAGEM'=>'personagem','RAÇA'=>'raca','CLASSE'=>'classe','TENDÊNCIA1'=>'tendencia1','TENDÊNCIA2'=>'tendencia2','SEXO'=>'sexo');
    @$act=$_GET['act'];
    @$x=$_GET['pag'];
    @$classe=$_GET['classe'];
    @$personagem=$_GET['personagem'];
    @$raca=$_GET['raca'];
    @$login=strtoupper($_COOKIE['login']);
    if(!$raca){
        @$raca=$_POST['raca'];
    }
    $y=$x+2;
        if($x==0){ 
           $class='class="disabled"';
        }else{
           $class='title=RECUAR';
        }
      @$z = $_GET['z'];
      if(!$z){
         $z=0;
      }
?>
<div  class="conteudo" >
    <?php if($act=='lista'):?>
        <?php 
            $dao=new Dao();
            $search=new ModelSearchCriteria();
            $search->settabela('personagem');
            if($login<>'MESTRE'){
                $search->setjogador($login);
            }
            $lista=$dao->encontre($search);
            /// Nivel do Jogador ////
            @$level=$_GET['level'];
            if(!$level){
                $level=1; 
            }
            ////////
            $titulos=array('PERSONAGEM','RAÇA','CLASSE','TENDÊNCIA1','TENDÊNCIA2');
            echo '<div class=paginacao>';
                echo '<span class=pag >Páginas ';
                echo ($x)+1 .' de ';
                echo ceil(count($lista)).'</span>';
            echo '</div>';
            if(($x)+1 == ceil(count($lista)) || count($lista) == 0){
                $class2='class=disabled';
            }else{
                $class2='title="AVANÇAR"';
            }
        ?>
        <div class=lista>
            <fieldset>
               <?php
                  echo '<legend><a href='.Utils::createLink('cadastro',array('act'=>'lista','pag'=>$x-1,'z'=>$z-1)).' '.$class.' ><< </a> FICHA DE PERSONAGEM <a href='.Utils::createLink('cadastro',array('act'=>'lista','pag'=>$x+1,'contador'=>count($lista),'z'=>$z+1)).' '.$class2.'> >> </a>&nbsp&nbsp LEVEL '.$level.'</legend>';
                     $ids=array();
                     foreach($lista as $item){
                        $ids[]= $item->getid();
                     }
                     if(!$ids){
                        echo '<span class=semPersonagem>Não existe nenhum personagem para este jogador</span>';
                     } 
                     //$z=1;
                    echo '<div class="raca">';
                        echo '<table cellspacing=0 border=1>';
                            foreach($lista as $keys => $item){
                               //if($x < $keys && $keys < $y){
                               //echo $ids[0];die;
                                if($login != 'MESTRE'){
                                    $pagina = 'missao';
                                }else{
                                    $pagina = 'ficha';
                                }
                               if($item->getid() == $ids[$z]){
                                  echo '<tr><td class=nomes>'.$titulos[0].'</td><td class=nomes2><a href='.Utils::createLink($pagina, array('personagem'=>$item->getpersonagem())).'>'.$item->getpersonagem().'<span class=verFicha><br>(ver ficha)</span></a></td></tr>';
                                  echo '<tr><td class=nomes>'.$titulos[1].'</td><td class=nomes2>'.$item->getraca().'</td></tr>';
                                  echo '<tr><td class=nomes>'.$titulos[2].'</td><td class=nomes2>'.$item->getclasse().'</td></tr>';
                                  echo '<tr><td class=nomes>'.$titulos[3].'</td><td class=nomes2>'.$item->gettendencia1().'</td></tr>';
                                  echo '<tr><td class=nomes>'.$titulos[4].'</td><td class=nomes2>'.$item->gettendencia2().'</td></tr>';
                                  echo '<span class=foto><img height=220px src="'.$item->getavatar().'" />'; 
                                  if($item->getemMissao()==1){
                                    echo '<br><span class=missao> <img title="Em missão" height=11px src="../web/imagens/sirene.gif" /> Em missão</span>';
                                  }
                                  echo '</span>';
                        echo '</table>';
                    echo '</div>';
                                  echo '<div class=saudacao>Personagem de '.strtoupper($item->getjogador()).'</div>';
                               //}elseif($keys > $y){
                                  break;
                               }
                            }                     
                               //print_r($ids);
               ?>
            </fieldset>
        </div>
    <?php elseif($act=='cad'): ?>
        <script>dica();</script>
        <div class='cad'>
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM</legend>
                <form class="font_1" id="cadastro" action="../paginas/add.php?act=cad&personagem=<?php echo $personagem ?>&raca=<?= $raca ?>" method="POST">
                    <table>
                        <?php
                           foreach($variaveis as $keys => $item){
                              if($item=='sexo'){
                                echo '<tr><td align=right> '.$keys.': </td>';
                                echo '<td><input onchange="functionSexoClasse()" type=radio name=sexo value=M> MASCULINO';
                                echo ' <input onchange="functionSexoClasse()" type=radio name=sexo value=F> FEMININO</td></tr>';
                              }elseif($item=='raca'){
                                echo '<tr><td align=right> '.$keys.': </td>';
                                echo '<td><select id="mySelect" name=raca onchange="myFunction()">';
                                    echo '<option>&nbsp</option>';
                                    echo '<option value=humano>HUMANO</option>';
                                    echo '<option value=anao>ANÃO</option>';
                                    echo '<option value=elfo>ELFO</option>';
                                    echo '<option value=halfling>HALFLING</option>';
                                echo '</select><span id=trocaAvatar onclick=mudaImagem('.$max.')></span></td></tr>';
                            }elseif($item=='classe'){
                                echo '<tr><td align=right> '.$keys.': </td>';
                                    echo '<td><select name=classe id="myClasse" onchange="functionSexoClasse()" >';
                                        echo '<option>&nbsp</option>';
                                        echo '<option value=espadachim>ESPADACHIM</option>';
                                        echo '<option value=guerreiro>GUERREIRO</option>';
                                        echo '<option value=paladino>PALADINO</option>';
                                        echo '<option value=ranger>RANGER</option>';
                                        echo '<option value=gatuno>GATUNO</option>';
                                        echo '<option value=mago>MAGO</option>';
                                        echo '<option value=sacerdote>SACERDOTE</option>';
                                    echo '</select></td></tr>';
                            }elseif($item=='tendencia1'){
                                echo '<tr><td align=right> '.$keys.': </td>';
                                    echo '<td><select name=tendencia1>';
                                        echo '<option>&nbsp</option>';
                                        echo '<option value=bom>BOM</option>';
                                        echo '<option value=neutro>NEUTRO</option>';
                                        echo '<option value=mau>MAU</option>';
                                    echo '</select></td></tr>';
                            }elseif($item=='tendencia2'){
                                echo '<tr><td align=right> '.$keys.': </td>';
                                    echo '<td><select name=tendencia2>';
                                        echo '<option>&nbsp</option>';
                                        echo '<option value=leal>LEAL</option>';
                                        echo '<option value=neutro>NEUTRO</option>';
                                        echo '<option value=caótico>CAÓTICO</option>';
                                    echo '</select></td></tr>';
                            }elseif($item=='jogador'){
                                echo "<tr><td align=\"right\"> $keys: </td><td>$login</td></tr>";
                                echo "<input type=\"hidden\" name=\"jogador\" value=\"".$login."\" size=\"40\" />";
                            }else{
                                echo "<tr><td align=\"right\"> $keys: </td><td><input type=\"text\" name=\"".$item."\" size=\"40\" / required></td></tr>";
                            }
                        }?>
                    </table>
                    <div class='bnt_'>
                        <input type="reset" value="LIMPA" class='botao2 botao-verde2'>
                        <input type="submit" value="GRAVA" class='botao botao-verde'>
                    </div>
                    <table><tr><td>
                        <div id="aqui" class="cadraca"></div> 
                        <div id="aqui.texto" align="justify" class="texto"></div>
                        </td></tr>
                    </table>
                </form> 
                <!--<div class='racaAvatar racaAvatar-red' onclick=mudaImagem(racaAvatar,1,12)>Trocar Avatar</div>-->
                <script>trocaAvatar('Trocar Avatar')</script>
            </fieldset>
        </div>
    <?php elseif($act=='cad2'): ?>
        <div class='cad2'>
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad2&personagem=<?php echo $personagem ?>&raca=<?= $raca ?>" method="POST">
                    <?php 
                        $dao=new Dao();
                        $search=new ModelSearchCriteria();
                        switch ($classe){
                            case 'espadachim':
                                $search->settabela('tb_espadachim');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'guerreiro':
                                $search->settabela('tb_guerreiro');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'barbaro':
                                $search->settabela('tb_barbaro');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'paladino':
                                $search->settabela('tb_paladino');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'ranger':
                                $search->settabela('tb_ranger');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'gatuno':
                                $search->settabela('tb_gatuno');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'mago':
                                $search->settabela('tb_mago');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'sacerdote':
                                $search->settabela('tb_sacerdote');
                                $habilidades=$dao->encontre($search);
                                break;
                        }
                    ?>
                    <!--<table>-->
                        <?php
                            if(@$habilidades){
                                echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($classe).'</div>';
                                echo '<div align=right class=cadTitulo>Escolha três habilidades para '.strtoupper($personagem).'&nbsp&nbsp</div>';
                                echo '<table>';
                                    echo '<tr>';
                                        foreach($habilidades as $key => $item){
                                            $requisitos=explode (';',$item->getREQUISITOS());
                       
                                            if(in_array('Nível 5',$requisitos) || in_array('Nível 10',$requisitos)){//|| is_numeric(substr($item->getREQUISITOS(),-1)) ){
                                                $cor='red';
                                            }else{
                                                $numero=substr($item->getREQUISITOS(),-1);
                                                if(is_numeric($numero)){
                                                   //echo $item->getREQUISITOS().' - ';
                                                   //print_r($numero);
                                                   $cor='red';
                                                }else{
                                                   $cor=null; 
                                                }
                                                echo '<td><input type=checkbox onclick=habilidades() name=\''.$item->gethabilidade().'\'title=\'';
                                                    echo 'TIPO: '.($item->getTIPO())."\r\n";
                                                    echo 'MANA: '.($item->getMANA())."\r\n"; 
                                                    echo 'REQUISITOS: '.($item->getREQUISITOS())."\r\n";
                                                    echo 'DESCRIÇÃO: '.($item->getDESCRICAO());                           
                                                echo '\' value='.($item->getid()).'> <span title=\'';
                                                    echo 'TIPO: '.($item->getTIPO())."\r\n";
                                                    echo 'MANA: '.($item->getMANA())."\r\n"; 
                                                    echo 'REQUISITOS: '.($item->getREQUISITOS())."\r\n";
                                                    echo 'DESCRIÇÃO: '.($item->getDESCRICAO());
                                                echo '\' ><font color='.$cor.'>'.$item->gethabilidade().'</font>';
                                                echo '</td>';
                                            }
                                                switch ($item->getid()){
                                                    case 4:
                                                    case 8:
                                                    case 12:
                                                    case 16:
                                                    case 20:
                                                    case 24:
                                                    case 28:
                                                    case 32:
                                                    echo '</tr><tr>';
                                                    break;
                                                }
                                        }
                                echo '</tr></table>';
                            }
                            echo '<br><div align=center class=cadTitulo>Nos fale um pouco sobre '.strtoupper($personagem).'</div>';
                            echo '<div class=cadHistoria>';
                                echo '<label>Idade: </label>';
                                echo '<input type=text size=1 maxlength="3" name=idade>anos';
                                echo '<label> Altura: </label>';
                                echo '<input type=text size=2 maxlength="4" name=altura>m';
                                echo '<label> Peso: </label>';
                                echo '<input type=text size=2 maxlength="3" name=peso>Kg';
                                echo '<br>';
                                echo '<label> Cidade Natal: </label>';
                                echo '<input type=text name=cidade>';
                                echo '<br>';
                                echo '<label> Fale sobre a origem, os costumes e cultura do seu povo: </label>';
                                echo '<br>';
                                echo '<textarea rows="4" cols="85" name=breveHistoria></textarea>';
                                                 echo '<br>';
                                echo '<label> O porquê entrou nesta aventura? </label>';
                                echo '<br>';
                                echo '<textarea rows="4" cols="85" name=motivacao></textarea>';
                            echo '</div>';
                        ?>
                        <input type="submit" value="AVANÇA" class='botao botao-verde'>
                    <!--</table>-->
                </form>
            </fieldset>
        </div>
    <?php elseif($act=='cad3'): 
        $dao=new Dao();
        $search=new ModelSearchCriteria();
        $search->settabela('armamentos');
        $search->setpersonagem($_GET['personagem']);
        $atrib=$dao->encontrePorPersonagem($search);            
        if(!$atrib){
            $recurso=400;
        }else{
            $recurso=$atrib->getouro();
        }
    ?>
        <div class='cad3'>
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad3&personagem=<?php echo $personagem ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $_GET['raca'] ?>" method="POST" >
                    <table>
                        <?php
                            echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($_GET['classe']).'</div>';
                            echo '<div class="moeda cadTitulo" id=moedas ><img height= 20px src=../web/imagens/coin.gif /><span id=moeda></span></div>';
                            echo '<div align=right class=cadTitulo>Armamentos para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                            echo '<span class=nota>Coloque o mouse em cima dos quadradinhos para ver a descrição das armas.</span>';
                              echo '<div class=armascorporais>';
                                 echo '<fieldsel>';
                                    echo '<legend>Armas Corporais</legend>';
                                    echo '<img src=../web/imagens/itens/armascorporais/armascorporais.png />';
                                    echo '<img src=../web/imagens/itens/armascorporais/armascorporais2.png />';

                                //itens//
                                    $listaArmas=array('Machadinha','Machado de Batalha','Machado Pesado','Glaive','Alabarda','Adaga','Espada Curta','Rapiera','Sabre','Espada Longa','Cimitarra','Claymore','Bordão','Soqueira','Bico-de-Corvo','Maça Estrela','Maça Leve','Maça Pesada','Clava','Mangual','Martelo de Guerra','Marreta','Azagaia','Lança','Tridente','Martelo Lucerno');
                                    $search->settabela('tb_armas_corporais');
                                    foreach($listaArmas as $item){
                                        $search->setARMA($item);
                                        $armasCoporais=$dao->encontrePorArma($search);
                                          if($armasCoporais->getARMA()){
                                             $desc='Arma: '.
                                                   $armasCoporais->getARMA()."\r\n";}
                                          if($armasCoporais->getouro()){
                                             $desc.='Custo: '.
                                                   $armasCoporais->getouro()."\r\n";}
                                          if($armasCoporais->getDANO()){
                                             $desc.='Dano: '.
                                                   $armasCoporais->getDANO()."\r\n";}
                                          if($armasCoporais->getTIPO()){ 
                                             $desc.='Tipo: '.  
                                                   $armasCoporais->getTIPO()."\r\n";}
                                          if($armasCoporais->getFN()){
                                             $desc.='Força Necessária: '.
                                                   $armasCoporais->getFN()."\r\n";}
                                          if($armasCoporais->getGRUPO()){
                                             $desc.='Grupo: '.
                                                   $armasCoporais->getGRUPO()."\r\n";}
                                          if($armasCoporais->getOBS()){ 
                                             $desc.='Obs: '.
                                                   $armasCoporais->getOBS();}
                                        echo '<span class='.str_replace(' ','',$item).' >';
                                            echo '<input type=checkbox onchange=moeda(\''.$recurso.'\'); value='.$armasCoporais->getouro().' name=\''.$item.'\' title="'.
                                            $desc.'" />';
                                        echo '</span>';
                                    }
                        ?>
                        <div>
                        <input type="submit" value="AVANÇA" class='botao botao-verde' />  
                        <a href="../web/index.php?pagina=cadastro&act=cad4&classe=<?= $_GET['classe'] ?>&personagem=<?= $_GET['personagem'] ?>&raca=<?= $raca ?>"><input type=button class='botao2 botao-verde2' value=PULAR /></a> 
                        </div>
                    </table> 
                </form>
                <script>moeda('<?= $recurso ?>');</script>
            </fieldset>
    <?php elseif($act=='cad4'): 
        $dao=new Dao();
        $search=new ModelSearchCriteria();
        $search->settabela('armamentos');
        $search->setpersonagem($_GET['personagem']);
        $atrib=$dao->encontrePorPersonagem($search);
        if($atrib){
            $recurso=$atrib->getouro();
        }else{
            $recurso=400;
        }
    ?>
        <div class="cad4">
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad4&personagem=<?php echo $search->getpersonagem() ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $_GET['raca'] ?>" method="POST">
                    <table>
                        <?php
                            echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($_GET['classe']).'</div>';
                            echo '<div class="moeda cadTitulo" id=moedas ><img height= 20px src=../web/imagens/coin.gif /><span id=moeda></span></div>';
                            echo '<div align=right class=cadTitulo>Armamentos para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                                echo '<span class=nota>Coloque o mouse em cima dos quadradinhos para ver a descrição das armas.</span>';
                                echo '<div class=armascorporais>';
                                     echo '<fieldsel>';
                                        echo '<legend>Armas a Distância</legend>';
                                        echo '<img class=dist src=../web/imagens/itens/armasdistancia/armasdistancia.png />';

                               //itens//
                                        $listaArmas=array('Besta Pesada','Besta Leve','Prodd','Virote Comum','Virote Garateia','Zarabatana','Balas','Funda','Fustíbalo','Arco Recurvo','Arco Composto','Arco Simples','Arco de Guerra','Plumbata','Flecha Comum','Flecha Garateia');
                                        $search->settabela('tb_armas_distancia');
                                        foreach($listaArmas as $item){
                                            $search->setARMA($item);
                                        $armasCoporais=$dao->encontrePorArma($search);
                                          if($armasCoporais->getARMA()){
                                             $desc='Arma: '.
                                                   $armasCoporais->getARMA()."\r\n";}
                                          if($armasCoporais->getouro()){
                                             $desc.='Custo: '.
                                                   $armasCoporais->getouro()."\r\n";}
                                          if($armasCoporais->getDANO()){
                                             $desc.='Dano: '.
                                                   $armasCoporais->getDANO()."\r\n";}
                                          if($armasCoporais->getTIPO()){ 
                                             $desc.='Tipo: '.  
                                                   $armasCoporais->getTIPO()."\r\n";}
                                          if($armasCoporais->getFN()){
                                             $desc.='Força Necessária: '.
                                                   $armasCoporais->getFN()."\r\n";}
                                          if($armasCoporais->getGRUPO()){
                                             $desc.='Grupo: '.
                                                   $armasCoporais->getGRUPO()."\r\n";}
                                          if($armasCoporais->getOBS()){ 
                                             $desc.='Obs: '.
                                                   $armasCoporais->getOBS();}
                                            echo '<span class='.str_replace(' ','',$item).' >';
                                                echo '<input type=checkbox onchange=moeda(\''.$recurso.'\'); value='.$armasCoporais->getouro().' name=\''.$item.'\' title="'.
                                                  $desc.'" />';
                                            echo '</span>';
                                        }
                                        echo '<script>moeda('.$recurso.');</script>';
                                        echo '<input type="submit" value="AVANÇA" class=\'botao botao-verde\'> ' ;  
                                        echo '<input type="button" value="VOLTAR" class=\'botao botao-verde\' onclick=history.go(-1) > ' ;  
                                        echo '<a href=\'../web/index.php?pagina=cadastro&act=cad5&classe='.$_GET['classe'].'&raca='.$raca.'&personagem='. $_GET['personagem'].'\'><input type=button class=\'botao botao-verde\' value=PULAR></a>'; 
                        ?>
                        <br><br><br>
                    </table>
                </form>
            </fieldset>
        </div>
    <?php elseif($act=='cad5'||$act=='cad6'||$act=='cad7'): 
        $dao=new Dao();
        $search=new ModelSearchCriteria();
        $search->settabela('armamentos');
        $search->setpersonagem($_GET['personagem']);
        $atrib=$dao->encontrePorPersonagem($search);
        if($atrib){
            $recurso=$atrib->getouro();
        }else{
            $recurso=400;
        }            
        if($act=='cad5'){
            $cad='cad6';
            $class='cad5';
        }elseif($act=='cad6'){
            $cad='cad7';
            $class='cad6';
        }elseif($act=='cad7'){
            $cad='cad8';
            $class='cad7';
        }
    ?>
        <div class="<?= $class ?>">
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=<?= $act ?>&personagem=<?php echo $_GET['personagem'] ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $_GET['raca'] ?>" method="POST">
                    <table>
                        <?php
                            echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($_GET['classe']).'</div>';
                            echo '<div class="moeda cadTitulo" id=moedas ><img height= 20px src=../web/imagens/coin.gif /><span id=moeda></span></div>';
                            if($act=='cad5'||$act=='cad6'){
                                echo '<div align=right class=cadTitulo>Armaduras para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                                echo '<span class=nota>Coloque o mouse em cima dos quadradinhos para ver a descrição das armas.</span>';
                            }elseif($act=='cad7'){
                                echo '<div align=right class=cadTitulo>Ítens para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                            }
                            echo '<div class=armascorporais>';
                            echo '<fieldsel>';
                            if($act=='cad5'){
                                echo '<legend>Armaduras & Escudos</legend>';
                                echo '<img class=dist src=../web/imagens/itens/armaduras/armaduras.png />';
                            }elseif($act=='cad6'){
                                echo '<legend>Itens de Conjuração</legend>';
                                echo '<img class=conj src=../web/imagens/itens/conjuracao/conjuracao.png />';
                                echo '<img height=310px class=conj2 src=../web/imagens/itens/conjuracao/conjuracao2.png />';
                            }elseif($act=='cad7'){
                                echo '<legend>Itens Gerais</legend>';
                                $search->setpersonagem(null);
                                $search->settabela('tb_equipamento_geral');
                                $equipamentos=$dao->encontre($search);
                                echo '<table class=equipamentos><tr>';
                                    echo '<th>ITEM</th>';
                                    echo '<th>CUSTO</th>';
                                    echo '<th>PESO</th>';
                                    echo '<th>DESCRIÇÃO</th>';
                                    echo '<th>COMPRAR</th>';
                                echo '</tr>';
                                foreach($equipamentos as $item){
                                    echo '<tr>';
                                        echo '<td>'.$item->getitem().'</td>';
                                        echo '<td align=center>'.$item->getouro().'</td>';
                                        echo '<td align=center>'.$item->getpeso().'</td>';
                                        echo '<td>'.$item->getDESCRICAO().'</td>';
                                        echo '<td align=center><input type=checkbox onchange=moeda(\''.$recurso.'\') value='.$item->getouro().' name=\''.$item->getitem().'\'  /></td>';
                                    echo '</tr>';
                                }
                                echo '</table>';
                                echo '<script>moeda('.$recurso.')</script>';
                                echo '<div class="conclui">';
                                    echo '<input type="submit" value="CONCLUIR" class="botao botao-verde">';        
                                    echo '<br><br>'; 
                                echo '</div>';
                                die;
                            }
                       //itens//
                            if($act=='cad5'){
                                $listaArmas=array('Armadura Simples','Armadura de Batalha','Armadura Completa','Túnica Pesada','Escudo de Corpo','Escudo Médio','Escudo Pequeno','Armadura de Couro');
                                $search->settabela('tb_armaduras');
                            }elseif($act=='cad6'){
                                $listaArmas=array('Cajado','Cetro','Grimório','Missal','Orbe de Cristal','Punhal','Símbolo Sagrado','Varinha');
                                $search->settabela('tb_conjuracao');
                            }
                            foreach($listaArmas as $item){
                                if($act=='cad5'){
                                    $search->setarmadura($item);
                                    $armaduras=$dao->encontrePorArmadura($search);
                                    if($armaduras->getarmadura())
                                       $desc='Armadura: '.$armaduras->getarmadura()."\r\n";
                                    if($armaduras->getouro())
                                       $desc.='Custo: '.$armaduras->getouro()."\r\n";
                                    if($armaduras->getdefesa())
                                       $desc.='Defesa: '.$armaduras->getdefesa()."\r\n";
                                    if($armaduras->getFN())
                                       $desc.='FN: '.$armaduras->getFN()."\r\n";
                                    if($armaduras->getpeso())
                                       $desc.='Peso: '.$armaduras->getpeso()."\r\n";
                                    if($armaduras->getOBS())
                                       $desc.='Obs: '.$armaduras->getOBS();
                                    echo '<span class='.str_replace(' ','',$item).' >';
                                    $item = $item.'/'.$armaduras->getdefesa();
                                    $value=$armaduras->getouro();
                                }elseif($act=='cad6'){
                                    $search->setARMA($item);
                                    $armaduras=$dao->encontrePorArma($search);
                                    if($armaduras->getARMA())
                                        $desc='Item: '.$armaduras->getARMA()."\r\n";
                                    if($armaduras->getouro())
                                        $desc .='Custo: '.$armaduras->getouro()."\r\n";
                                    if($armaduras->getFN())
                                        $desc .='FN: '.$armaduras->getFN()."\r\n";
                                    if($armaduras->getpeso())
                                        $desc .='Peso: '.$armaduras->getpeso()."\r\n";
                                    if($armaduras->getDESCRICAO())
                                        $desc .='Descrição: '.$armaduras->getDESCRICAO()."\r\n";
                                    if($armaduras->getOBS())
                                        $desc .='Obs: '.$armaduras->getOBS();
                                    echo '<span class='.str_replace(' ','',$item).' >';
                                        $value=$armaduras->getouro();
                                }
                                /// verifica se possui o recurso para compra ///
                                        echo '<input type=checkbox onchange=moeda(\''.$recurso.'\'); value='.$value.' name=\''.$item.'\' title="'.$desc.'" />';
                                //////////         
                                    echo '</span>';
                            }
                            if($act=='cad6'){
                                echo '<span class=Cajado_ title="Pode ser usado em combate como um Bordão.">*</span>';
                                echo '<span class=Cetro_ title="Pode ser usado em combate como uma Clava.">*</span>';
                                echo '<span class=Punhal_ title="Pode ser usado em combate como uma Adaga.">*</span>';
                            }
                        ?>
                        <script>moeda('<?= $recurso ?>');</script>
                        <input type="submit" value="AVANÇA" class='botao botao-verde'>&nbsp
                        <input type=button value="VOLTAR" onclick=history.go(-2) class='botao botao-verde'>&nbsp
                        <a href="../web/index.php?pagina=cadastro&act=<?= $cad ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $raca ?>&personagem=<?= $_GET['personagem'] ?>"><input type=button class='botao botao-verde' value=PULAR></a> 
                        <br><br>
                    </table>
                </form>
            </fieldset>
        </div>
    <?php elseif($act=='cad8'): 
        echo '<div class=\'addFim\'>'.
             '<h3>PARABENS!<br>SUA FICHA ESTÁ COMPLETA.<br>BOM JOGO!</h3>';
             '</div>';
        die;
    ?> 
    <?php elseif($act=='avatar'):
        //print_r($_POST);die;
        $dao = new Dao();
        $search = new ModelSearchCriteria();
        $search->settabela('tb_avatar');
        $search->setraca($raca);
        $avatares=$dao->encontrePorAvatar($search);
        switch($raca){
            case "halfling":
                $avatarFundo='halfling';
                break;
            case "humano":
                $avatarFundo='humano';
                break;
        }
        echo '<div id=\'avatar\'></div>';
        echo '<div class='.$avatarFundo.'Fundo>';
        $total= count($avatares);
        echo "<button onclick=mudaImagem('humano',1,$total);>Mudar Avatar</button>";
            foreach($avatares as $avatar){
                echo '<span class='.$raca.$avatar->getid().'>';
                echo '<input type=radio value='.$avatar->getid().' name=avatar />';
                echo '</span>';
            }
        echo '</div>';
        die;
    ?>           
    <?php endif; ?>
</div>