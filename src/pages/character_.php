<style>
    @import url('https://fonts.googleapis.com/css2?family=Libre+Franklin:ital,wght@1,100&display=swap');
	/* #rodape {
		visibility: hidden;
	} */

    /* .lista,
    .add, .add2,
    .add3, .add4, .add5,
    .add6, .add7, .jogador { */
    /* .add { */
        /* margin: 40px 60px; */
        /* max-width: 900px; */
        /* height: 950px; */
        /* clear: left; */
        /* border: 1px solid black; */
    /* } */

    /* .add fieldset {
        border: 1px solid white;
        height: 500px;
        padding: 20px 40px;
        border-radius: 5px;
    } */

    /* .add legend { */
        /* text-align: center; */
        /* color: white; */
        /* font-size: 18px; */
    /* } */

    /* .add section {
        width: 50%;
    }

    .add #side-left {
        float: left;
    } */

    /* .add .side-right {
        width: 50%;
        float: right;
    } */

    /* .add table {
        color: #9a9a9a;
    }

    .add table td {
        padding: 5px;
    } */

    .btn_ {
        text-align: right;
        margin-right: 40px;
        /* position: absolute;
        right: 0;
        bottom: 40;
        margin-right: 60; */
    }

    .galery {
        /* background: yellow; */
        /* position: absolute; */

        /* width: 50%; */
        /* float: right; */
        padding: 0 170px;


        /* height: 80%; */
        /* text-align: center; */
        /* display/: flex; */
        /* overflow: hidden; */
    }

    .galery img {
        height: 250px;


        /* max-width: 20px; */
        /* position: fixed;
        right: 0; */
        /* width: 50px; */
        /* border: 4px solid grey; */
        /* margin: 0 auto; */
    }

    #description {
        height: 280px;
        /* background: blue; */
        width: 100%;
        margin-top: 40px;
        font-family: 'Libre Franklin', sans-serif;
        font-weight: bolder;
        letter-spacing: .1em;
        overflow: auto;
    }







    /*#myBreed, #myClass, #trend1, #trend2 {

    }*/







    /* .carousel { */
        /* height: 200px; */
        /* width: 100px; */
    /* } */

    /* .add .btn-rpg {
        font-family: arial;
        font-weight: 700;
        font-size: 16px;
        border: none;
        cursor: pointer;
        border-radius: 15px;
        padding: 0 8px;
    }

    .add .btn-green {
        background-color: #006000;
        color: white;
        box-shadow: 0 5px 0 #003f00;
    }

    .add .btn-green:hover {
        background-color: #025502;
    }

    .add .btn-green:active {
        position: relative;
        top: 5px;
        box-shadow: none;
    }

    .add .btn-silver {
        background-color: #707070;
        color: white;
        box-shadow: 0 5px 0 #343434;
        text-shadow: 2px 0 2px #262626;
    }

    .add .btn-silver:hover {
        background-color: #565555;;
    }

    .add .btn-silver:active {
        position: relative;
        top: 5px;
        box-shadow: none;
    } */

    /*.add table {
        margin: 0 80px;
    }

    .add td {
        padding-left: 5px;
    }

    .ficha legend, .lista legend, .add legend {
        font-family: 'Audiowide', cursive;
    } */

    /* .add2 fieldset {
        width: 900px;
        margin: auto;
        height: 690px;
    } */

    /* .add2 .botao, .add4 .botao, .add5 .botao, .add6 .botao, .add7 .botao, .zera, .ouro, .vilao .botao, .missao .botao {
        font-size: 16px;
        padding: 0 4px;
        position: relative;
        font-family: arial;
        font-weight: 700;
        border: none;
        cursor: pointer;
        border-radius: 15px;
        font-size: 16px;
        color: white;
    } */

    /* .add2 .botao {
        top: 10px;
        left: 700px;
    } */

    /* .add2 .botao-verde, .add4 .botao-verde, .add5 .botao-verde, .add6 .botao-verde, .add7 .botao-verde, .vilao .botao-verde, .missao .botao-verde {
        background-color: #007c00;
        box-shadow: 0 5px 0 #003f00;
    } */

    /* .add2 .botao-verde:hover, .add4 .botao-verde:hover, .add5 .botao-verde:hover, .add6 .botao-verde:hover, .add7 .botao-verde:hover, .zera:hover, .ouro:hover, .vilao .botao-verde:hover, .missao .botao-verde:hover {
        background-color: #006000;
    } */

    /* .add2 .botao-verde:active {
        background-color: #006000;
        color: white;
        position: relative;
        top: 15px;
        box-shadow: none;
    }

.add4 .botao{
    position: relative;
    top: -10px;
    float: right;
    margin-right: 5px;
}
.add4 .botao:active{
    position: relative;
    top: -5px;
    box-shadow: none;
}
.add5 .botao{
    float: right;
    top: 10px;
    margin-right: 5px;
}
.add6 .botao{
    float: right;
    top: -60px;
    margin-right: 5px;
}
.add7 .botao{
    float: right;
    top: 10px;
    margin-right: 5px;
}
.add5 .botao:active{
    position: relative;
    top: 15px;
    box-shadow: none;
}
.add6 .botao:active{
    position: relative;
    top: -55px;
    box-shadow: none;
}
.add7 .botao:active{
    top: 15px;
    box-shadow: none;
}
.add3 .botao{
    font-size: 16px;
    padding: 0 4px;
    font-family: arial;
    font-weight: 700;
    border: none;
    cursor: pointer;
    border-radius: 15px;
    font-size: 16px;
    color: white;
    position: relative;
    top: -10px;
    float: right;
}
.add3 .botao2{
    font-size: 16px;
    padding: 0 4px;
    font-family: arial;
    font-weight: 700;
    border: none;
    cursor: pointer;
    border-radius: 15px;
    font-size: 16px;
    color: white;
    position: relative;
    top: -10px;
    float: right;
    margin-right: 5px;
}
.add3 .botao-verde{
    background-color: #007c00;
    background-color: green;
    box-shadow: 0 5px 0 #003f00;
}
.add3 .botao-verde:hover{
    background-color: #006000;
}
.add3 .botao-verde:active{
    background-color: #006000;
    color: white;
    position: relative;
    top: -5px;
    box-shadow: none;
}
.add3 .botao-verde2{
    background-color: #007c00;
    background-color: green;
    box-shadow: 0 5px 0 #003f00;
}
.add3 .botao-verde2:hover{
    background-color: #006000;
}
.add3 .botao-verde2:active{
    background-color: #006000;
    color: white;
    position: relative;
    top: -5px;
    box-shadow: none;
}
.add3Atrib{
    margin: 0 25px;
    font-family: 'Indie Flower', cursive;
}
.add3 fieldset{
    width: 900px;
    height: 830px;
}
.add4 fieldset, .add5 fieldset{
    width: 900px;
    height: 1100px;
}
.add6 fieldset{
    width: 900px;
    height: 750px;
}
.add7 fieldset{
    width: 900px;
    height: 2400px;
}
.add2 table, .addHistoria{
    margin: auto;
    background-color: rgba(255,235,205,0.4);
    box-shadow: 2px 2px 2px gray;
    padding: 3px;
    font-size: 13px;
    font-weight: 700;
    font-family: courier;
} */

</style>
<script>
    // $(function() {
    //     $("select[name=class]").on("change", function() {
    //         let breed = $(myCharacter).find("[name=breed]").val()
    //         let category = $(this).val()
    //         $.ajax({
    //             url: "breed",
    //             type: "POST",
    //             dataType: "JSON",
    //             data: {
    //                 breed,
    //                 category
    //             },
    //             beforeSend: function() {

    //             },
    //             success: function(response) {
    //                 if(typeof(response) === "string") {
    //                     return alertLatch(response, "var(--cor-warning)")
    //                 }
    //                 modal.show({
    //                     title: "Escolha seu Personagem",
    //                     content: "breed/show",
    //                     params: { response }
    //                 });
    //             },
    //             error: function(error) {

    //             },
    //             complete: function() {

    //             }
    //         })
    //     })
    // })


//   $(document).ready(function(){
//      $('.raca .verFicha_').mouseover(function(){
//         $(this).css('cursor','pointer'),
//         $(this).click(function(e){
//            $('.escolha').html('\
//                <a href="index.php?pagina=missao&personagem='+personagem+'"><button>Missão</button></a>\n\
//                <a href="index.php?pagina=ficha2&personagem='+personagem+'"><button class=bntFicha>Ficha</button></a>\n\
//             ').css({
//                top: '55px',
//                position: 'relative'
//             })
//          })
//      })
//      $(':file').change(function(){
//         $('#avatarPersonagem').hide();
//      })
//   })

</script>
<?php
    $variaveis = array('Jogador'=>'jogador','Personagem'=>'personagem','Raça'=>'raca','Classe'=>'classe','Tendência 1'=>'tendencia1','Tendência 2'=>'tendencia2','Sexo'=>'sexo');
    // @$act=$_GET['act'];
    // @$x=$_GET['pag'];
    // @$classe=$_GET['classe'];
    // @$personagem=$_GET['personagem'];
    // @$raca=$_GET['raca'];
    // @$login=strtoupper($_COOKIE['login']);
    // @$jogador_=$_GET['jogador'];


    // if(!$raca){
    //     @$raca=$_POST['raca'];
    // }
    // $y=$x+2;
    //     if($x==0){
    //        $class='class="disabled"';
    //     }else{
    //        $class='title=RECUAR';
    //     }
    //   @$z = $_GET['z'];
    //   if(!$z){
    //      $z=0;
    //   }
?>
<!-- <script>var act='<?= $act ?>'</script> -->
<div id="character" class="conteudo" >
    <?php if($act=='lista'):?>
        <?php
            $dao=new Dao();
            $search=new ModelSearchCriteria();
            $search->settabela('personagem');
            if($login<>'MESTRE' || $jogador_ == 'DOMESTRE'){
                $search->setjogador($login);
            }
            $lista=$dao->encontre($search);
            /// Nivel do Jogador ////
            @$level=$_GET['level'];
            if(!$level){
                $level=1;
            }
            ////////
            $titulos=array('PERSONAGEM','RAÇA','CLASSE','TENDÊNCIA1','TENDÊNCIA2'); ?>
            <div class=paginacao>
                <span class=pag >Páginas <?= ($x)+1 ?> de <?= ceil(count($lista)) ?> </span>
            </div>
        <?php
            if(($x)+1 == ceil(count($lista)) || count($lista) == 0){
                $class2='class=disabled';
            }else{
                $class2='title="AVANÇAR"';
            }
        ?>
        <div class=lista>
            <fieldset>
                  <legend><a href='<?= Utils::createLink('cadastro',array('act'=>'lista','jogador'=>''.$jogador_.'','pag'=>$x-1,'z'=>$z-1)).' '.$class ?>' ><img class=seta height=25px src=imagens/esquerda.png /> </a> FICHA DE PERSONAGEM <a href='<?= Utils::createLink('cadastro',array('act'=>'lista','pag'=>$x+1,'jogador'=>''.$jogador_.'','contador'=>count($lista),'z'=>$z+1)).' '.$class2 ?>'> <img class=seta height=25px src=imagens/direita.png /> </a>&nbsp&nbsp LEVEL <?= $level ?></legend>
                  <?php
                  $ids=array();
                  foreach($lista as $item){
                    $ids[]= $item->getid();
                     }
                     if(!$ids){
                        echo '<span class=semPersonagem>Não existe nenhum personagem para este jogador</span>';
                     }
                    echo '<div class="raca">';
                        echo '<table cellspacing=0 border=1>';
                            foreach($lista as $keys => $item){
                                if($login != 'MESTRE' || $jogador_ == 'DOMESTRE'){
                                    $pagina = 'missao';
                                }else{
                                    $pagina = 'ficha';
                                }
                                    if($item->getid() == $ids[$z]){
                                       echo '<tr><td class=nomes>'.$titulos[0].'</td><td class="nomes2 verFicha_">'.$item->getpersonagem().'<span class=verFicha><br>(ver ficha)</span></td></tr>';
                                       echo '<script>var personagem="'.$item->getpersonagem().'"</script>';
                                       echo '<tr><td class=nomes>'.$titulos[1].'</td><td class=nomes2>'.$item->getraca().'</td></tr>';
                                       echo '<tr><td class=nomes>'.$titulos[2].'</td><td class=nomes2>'.$item->getclasse().'</td></tr>';
                                       echo '<tr><td class=nomes>'.$titulos[3].'</td><td class=nomes2>'.$item->gettendencia1().'</td></tr>';
                                       echo '<tr><td class=nomes>'.$titulos[4].'</td><td class=nomes2>'.$item->gettendencia2().'</td></tr>';
                                       echo '<span class=foto><img src="'.$item->getavatar().'" />';
                                       if($item->getemMissao()==1){
                                         echo '<br><span class=missao> <img title="Em missão" height=11px src="../web/imagens/sirene.gif" /> Em missão</span>';
                                       }
                                       echo '</span>';
                             echo '</table>';
                             echo '<span class=escolha></span>';
                         echo '</div>';
                                       echo '<div class=saudacao>Personagem de '.strtoupper($item->getjogador()).'</div>';
                                       break;
                                    }
                            }
               ?>
            </fieldset>
        </div>
    <?php elseif($act=='add'):
        //  $pastas=null;
        //  $pastaJs = '{';
        //  foreach($racas as $individual){
        //     foreach($classes as $cadaUma){
        //        $pasta = $individual.'/'.$cadaUma.'/M/';
        //        $arquivos = glob("imagens/personagens/$pasta{*.png}", GLOB_BRACE);
        //        $pastas[$pasta] = count($arquivos);
        //        $pastaJs .= '\''.$pasta.'\':'.count($arquivos).',';
        //        $pasta = $individual.'/'.$cadaUma.'/F/';
        //        $arquivos = glob("imagens/personagens/$pasta{*.png}", GLOB_BRACE);
        //        $pastas[$pasta] = count($arquivos);
        //        $pastaJs .= '\''.$pasta.'\':'.count($arquivos).',';
        //     }
        //  }
        //  $pastaJs = substr($pastaJs,0,-1);
        //  $pastaJs .= '}'; ?>

        <!-- <script>var quantAvatar='<?= $pastaJs ?>'</script> -->
        <script>var act='add'</script>
        <div class='add'>
            <fieldset class="fieldset">
                <legend>CADASTRO DE PERSONAGEM</legend>
                <form enctype="multipart/form-data" id="myCharacter" action="../paginas/add.php?act=cad&personagem=<?= ($personagem ?? null) ?>&raca=<?= ($raca ?? null) ?>" method="POST">
                    <section class="side-left">
                        <label>Jogador: </label>
                        <input class="input-rpg" name="player" value="<?= ( strtoupper($login) ?? null) ?>" disabled />
                        <label>Personagem: </label>
                        <input class="input-rpg" type="text" name="character" required>
                        <div style="flex-grow: 2">
                            <!--<label>Raça: </label>-->
                            <button id="myBreed" class="btn-rpg" >Raça</button>
                            <span class="breed">&nbsp</span>
                        </div>
                        <div style="flex-grow: 2">
                            <label>Classe: </label>
                            <span>
                                <select id="myClass" class="input-rpg" name="class" >
                                    <option></option>
                                    <option value="espadachim">ESPADACHIM</option>
                                    <option value="guerreiro">GUERREIRO</option>
                                    <option value="paladino">PALADINO</option>
                                    <option value="ranger">RANGER</option>
                                    <option value="gatuno">GATUNO</option>
                                    <option value="mago">MAGO</option>
                                    <option value="sacerdote">SACERDOTE</option>
                                </select>
                            </span>
                        </div>
                        <div>
                            <label>Tendência 1: </label>
                            <select id="tred1" class="input-rpg" name="trend1">
                                <option></option>
                                <option value="good">BOM</option>
                                <option value="neutral">NEUTRO</option>
                                <option value="bad">MAU</option>
                            </select>
                            <label>Tendência 2: </label>
                            <select id="tred2" class="input-rpg" name="trend2">
                                <option></option>
                                <option value="leal">LEAL</option>
                                <option value="neutral">NEUTRO</option>
                                <option value="chaotic">CAÓTICO</option>
                            </select>
                        </div>
                        <div id="description" ></div>
                        <script>var jogador='<?= $login ?>';</script>
                    </section>
                    <section id="avatar" class="galery side-right">
                        <div><span id="breed">&nbsp</span></div>
                        <div class="single-item">
                            <?php foreach($breeds as $breed): ?>
                            <img src="image/id/<?= $breed->image_id ?>" alt="<?= $breed->name ?>" data-description="<?= $breed->description ?>" />
                            <?php endforeach ?>
                        </div>
                    </section>
		    <?php if(!empty($login) && $login != 'MESTRE'): ?>
                     <!--<div id="avatarPersonagem" class='avatarPersonagem'>
                         <label>Tocar Avatar </label><span id="trocaAvatarPersonagem" class="trocaAvatarPersonagem">&nbsp&nbsp&nbsp&nbsp&nbsp</span>
                     </div>-->
		    <?php endif; ?>
                    <!--<table>
                        <tr>
                            <td>
                                <?php if(!empty($login) && $login == 'MESTRE'){
                                    echo '<input type="hidden" name="MAX_FILE_SIZE" value="3000000" />';
                                    echo '<input type=file name="avatarMestre" /><br>';
                                    echo '<div id="aqui" class="cadraca"><img height=200px src="" /></div>';
                                }else{
                                    echo '<input type="hidden" name="MAX_FILE_SIZE" value="3000000" />';
                                    echo '<input type=file name="avatarMestre" /><br>';
                                    echo '<div id="aqui" class="cadraca"><img height=200px src="" /></div>';
                                } ?>
                                <div id="aquiTexto" align="justify" ></div>
                            </td>
                        </tr>
                    </table>-->
                </form>
            </fieldset>
            <div class='btn_'>
                <input type="reset" value="LIMPA" class='btn-rpg btn-silver'>
                <input name="upload" type="submit" value="GRAVA" class='btn-rpg btn-green'>
            </div>
        </div>
    <?php elseif($act=='add2'): ?>
        <div class='add2'>
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad2&personagem=<?php echo $personagem ?>&raca=<?= $raca ?>" method="POST">
                    <?php
                        $dao=new Dao();
                        $search=new ModelSearchCriteria();
                        switch ($classe){
                            case 'espadachim':
                                $search->settabela('tb_espadachim');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'guerreiro':
                                $search->settabela('tb_guerreiro');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'barbaro':
                                $search->settabela('tb_barbaro');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'paladino':
                                $search->settabela('tb_paladino');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'ranger':
                                $search->settabela('tb_ranger');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'gatuno':
                                $search->settabela('tb_gatuno');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'mago':
                                $search->settabela('tb_mago');
                                $habilidades=$dao->encontre($search);
                                break;
                            case 'sacerdote':
                                $search->settabela('tb_sacerdote');
                                $habilidades=$dao->encontre($search);
                                break;
                        }
                    ?>
                        <?php
                            if(@$habilidades){
                                echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($classe).'</div>';
                                echo '<div align=right class=cadTitulo>Escolha três habilidades para '.strtoupper($personagem).'&nbsp&nbsp</div>';
                                echo '<table>';
                                    echo '<tr>';
                                        foreach($habilidades as $key => $item){
                                            $requisitos=explode (';',$item->getREQUISITOS());

                                            if(in_array('Nível 5',$requisitos) || in_array('Nível 10',$requisitos)){//|| is_numeric(substr($item->getREQUISITOS(),-1)) ){
                                                $cor='red';
                                            }else{
                                                $numero=substr($item->getREQUISITOS(),-1);
                                                if(is_numeric($numero)){
                                                   //echo $item->getREQUISITOS().' - ';
                                                   $cor='red';
                                                }else{
                                                   $cor=null;
                                                }
                                                echo '<td id=habilidade><input type="checkbox" name=\''.$item->gethabilidade().'\'title=\'';
                                                    echo 'TIPO: '.($item->getTIPO())."\r\n";
                                                    echo 'MANA: '.($item->getMANA())."\r\n";
                                                    echo 'REQUISITOS: '.($item->getREQUISITOS())."\r\n";
                                                    echo 'DESCRIÇÃO: '.($item->getDESCRICAO());
                                                echo '\' value='.($item->getid()).'> <span title=\'';
                                                    echo 'TIPO: '.($item->getTIPO())."\r\n";
                                                    echo 'MANA: '.($item->getMANA())."\r\n";
                                                    echo 'REQUISITOS: '.($item->getREQUISITOS())."\r\n";
                                                    echo 'DESCRIÇÃO: '.($item->getDESCRICAO());
                                                echo '\' ><font color='.$cor.'>'.$item->gethabilidade().'</font>';
                                                echo '</td>';
                                            }
                                                switch ($item->getid()){
                                                    case 4:
                                                    case 8:
                                                    case 12:
                                                    case 16:
                                                    case 20:
                                                    case 24:
                                                    case 28:
                                                    case 32:
                                                    echo '</tr><tr>';
                                                    break;
                                                }
                                        }
                                echo '</tr></table>';
                            }
                            echo '<br><div align=center class=cadTitulo>Nos fale um pouco sobre '.strtoupper($personagem).'</div>';
                            echo '<div class=cadHistoria>';
                                echo '<label>Idade: </label>';
                                echo '<input type=text size=1 maxlength="3" name=idade>anos';
                                echo '<label> Altura: </label>';
                                echo '<input type=text size=2 maxlength="4" name=altura>m';
                                echo '<label> Peso: </label>';
                                echo '<input type=text size=2 maxlength="3" name=peso>Kg';
                                echo '<br>';
                                echo '<label> Cidade Natal: </label>';
                                echo '<input type=text name=cidade>';
                                echo '<br>';
                                echo '<label> Fale sobre a origem, os costumes e cultura do seu povo: </label>';
                                echo '<br>';
                                echo '<textarea rows="4" cols="85" name=breveHistoria></textarea>';
                                                 echo '<br>';
                                echo '<label> O porquê entrou nesta aventura? </label>';
                                echo '<br>';
                                echo '<textarea rows="4" cols="85" name=motivacao></textarea>';
                            echo '</div>';
                        ?>
                        <input type="submit" value="AVANÇA" class='botao botao-verde'>
                </form>
            </fieldset>
        </div>
    <?php elseif($act=='add3'):
        $dao=new Dao();
        $search=new ModelSearchCriteria();
        $search->settabela('armamentos');
        $search->setpersonagem($_GET['personagem']);
        $atrib=$dao->encontrePorPersonagem($search);
        if(!$atrib){
            $recurso=400;
        }else{
            $recurso=$atrib->getouro();
        }
    ?>
        <script>var recurso = <?= $recurso ?> </script>
        <div class='add3'>
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad3&personagem=<?php echo $personagem ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $_GET['raca'] ?>" method="POST" >
                    <table>
                        <?php
                            echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($_GET['classe']).'</div>';
                            echo '<div class="moeda cadTitulo" id=moedas ><img height= 20px src=../web/imagens/coin.gif /><span id=moeda></span></div>';
                            echo '<div align=right class=cadTitulo>Armamentos para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                            echo '<span class=nota>Coloque o mouse em cima dos quadradinhos para ver a descrição das armas.</span>';
                              echo '<div class=armascorporais>';
                                 echo '<fieldsel>';
                                    echo '<legend>Armas Corporais</legend>';
                                    echo '<img src=../web/imagens/itens/armascorporais/armascorporais.png />';
                                    echo '<img src=../web/imagens/itens/armascorporais/armascorporais2.png />';

                                //itens//
                                    $listaArmas=array('Machadinha','Machado de Batalha','Machado Pesado','Glaive','Alabarda','Adaga','Espada Curta','Rapiera','Sabre','Espada Longa','Cimitarra','Claymore','Bordão','Soqueira','Bico-de-Corvo','Maça Estrela','Maça Leve','Maça Pesada','Clava','Mangual','Martelo de Guerra','Marreta','Azagaia','Lança','Tridente','Martelo Lucerno');
                                    $search->settabela('tb_armas_corporais');
                                    foreach($listaArmas as $item){
                                        $search->setARMA($item);
                                        $armasCoporais=$dao->encontrePorArma($search);
                                          if($armasCoporais->getARMA()){
                                             $desc='Arma: '.
                                                   $armasCoporais->getARMA()."\r\n";}
                                          if($armasCoporais->getouro()){
                                             $desc.='Custo: '.
                                                   $armasCoporais->getouro()."\r\n";}
                                          if($armasCoporais->getDANO()){
                                             $desc.='Dano: '.
                                                   $armasCoporais->getDANO()."\r\n";}
                                          if($armasCoporais->getTIPO()){
                                             $desc.='Tipo: '.
                                                   $armasCoporais->getTIPO()."\r\n";}
                                          if($armasCoporais->getFN()){
                                             $desc.='Força Necessária: '.
                                                   $armasCoporais->getFN()."\r\n";}
                                          if($armasCoporais->getGRUPO()){
                                             $desc.='Grupo: '.
                                                   $armasCoporais->getGRUPO()."\r\n";}
                                          if($armasCoporais->getOBS()){
                                             $desc.='Obs: '.
                                                   $armasCoporais->getOBS();}
                                        echo '<span class='.str_replace(' ','',$item).' >';
                                            echo '<input class=armasCorp type=checkbox value='.$armasCoporais->getouro().' name=\''.$item.'\' title="'.$desc.'" />';
                                        echo '</span>';
                                    }
                        ?>
                        <div>
                        <input type="submit" value="AVANÇA" class='botao botao-verde' />
                        <a href="../web/index.php?pagina=cadastro&act=cad4&classe=<?= $_GET['classe'] ?>&personagem=<?= $_GET['personagem'] ?>&raca=<?= $raca ?>"><input type=button class='botao2 botao-verde2' value=PULAR /></a>
                        </div>
                    </table>
                </form>
                // <script>moeda('<?= $recurso ?>');</script>
            </fieldset>
        </div>
    <?php elseif($act=='add4'):
        $dao=new Dao();
        $search=new ModelSearchCriteria();
        $search->settabela('armamentos');
        $search->setpersonagem($_GET['personagem']);
        $atrib=$dao->encontrePorPersonagem($search);
        if($atrib){
            $recurso=$atrib->getouro();
        }else{
            $recurso=400;
        }
    ?>
        <script>var recurso = <?= $recurso ?></script>
        <div class="add4">
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=cad4&personagem=<?php echo $search->getpersonagem() ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $_GET['raca'] ?>" method="POST">
                    <table>
                        <?php
                            echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($_GET['classe']).'</div>';
                            echo '<div class="moeda cadTitulo" id=moedas ><img height= 20px src=../web/imagens/coin.gif /><span id=moeda></span></div>';
                            echo '<div align=right class=cadTitulo>Armamentos para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                                echo '<span class=nota>Coloque o mouse em cima dos quadradinhos para ver a descrição das armas.</span>';
                                echo '<div class=armascorporais>';
                                     echo '<fieldsel>';
                                        echo '<legend>Armas a Distância</legend>';
                                        echo '<img class=dist src=../web/imagens/itens/armasdistancia/armasdistancia.png />';

                               //itens//
                                        $listaArmas=array('Besta Pesada','Besta Leve','Prodd','Virote Comum','Virote Garateia','Zarabatana','Balas','Funda','Fustíbalo','Arco Recurvo','Arco Composto','Arco Simples','Arco de Guerra','Plumbata','Flecha Comum','Flecha Garateia');
                                        $search->settabela('tb_armas_distancia');
                                        foreach($listaArmas as $item){
                                            $search->setARMA($item);
                                        $armasCoporais=$dao->encontrePorArma($search);
                                          if($armasCoporais->getARMA()){
                                             $desc='Arma: '.
                                                   $armasCoporais->getARMA()."\r\n";}
                                          if($armasCoporais->getouro()){
                                             $desc.='Custo: '.
                                                   $armasCoporais->getouro()."\r\n";}
                                          if($armasCoporais->getDANO()){
                                             $desc.='Dano: '.
                                                   $armasCoporais->getDANO()."\r\n";}
                                          if($armasCoporais->getTIPO()){
                                             $desc.='Tipo: '.
                                                   $armasCoporais->getTIPO()."\r\n";}
                                          if($armasCoporais->getFN()){
                                             $desc.='Força Necessária: '.
                                                   $armasCoporais->getFN()."\r\n";}
                                          if($armasCoporais->getGRUPO()){
                                             $desc.='Grupo: '.
                                                   $armasCoporais->getGRUPO()."\r\n";}
                                          if($armasCoporais->getOBS()){
                                             $desc.='Obs: '.
                                                   $armasCoporais->getOBS();}
                                            echo '<span class='.str_replace(' ','',$item).' >';
                                                echo '<input class=armasCorp type=checkbox value='.$armasCoporais->getouro().' name=\''.$item.'\' title="'.$desc.'" />';
                                            echo '</span>';
                                        }
                                        echo '<script>moeda('.$recurso.');</script>';
                                        echo '<input type="submit" value="AVANÇA" class=\'botao botao-verde\'> ' ;
                                        echo '<input type="button" value="VOLTAR" class=\'botao botao-verde\' onclick=history.go(-1) > ' ;
                                        echo '<a href=\'../web/index.php?pagina=cadastro&act=cad5&classe='.$_GET['classe'].'&raca='.$raca.'&personagem='. $_GET['personagem'].'\'><input type=button class=\'botao botao-verde\' value=PULAR></a>';
                        ?>
                        <br><br><br>
                    </table>
                </form>
            </fieldset>
        </div>
    <?php elseif($act=='add5'||$act=='add6'||$act=='add7'):
        $dao=new Dao();
        $search=new ModelSearchCriteria();
        $search->settabela('armamentos');
        $search->setpersonagem($_GET['personagem']);
        $atrib=$dao->encontrePorPersonagem($search);
        if($atrib){
            $recurso=$atrib->getouro();
        }else{
            $recurso=400;
        }
        if($act=='add5'){
            $add='add6';
            $class='add5';
        }elseif($act=='add6'){
            $add='add7';
            $class='add6';
        }elseif($act=='add7'){
            $add='add8';
            $class='add7';
        }
    ?>
        <script>var recurso = <?= $recurso ?></script>
        <div class="<?= $class ?>">
            <fieldset>
                <legend>CADASTRO DE PERSONAGEM <span>(Continuação)</span></legend>
                <form class="font_1" id="cadastro2" action="../paginas/add.php?act=<?= $act ?>&personagem=<?php echo $_GET['personagem'] ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $_GET['raca'] ?>" method="POST">
                    <table>
                        <?php
                            echo '<div align=left class=cadTitulo>&nbsp&nbspClasse: '.strtoupper($_GET['classe']).'</div>';
                            echo '<div class="moeda cadTitulo" id=moedas ><img height= 20px src=../web/imagens/coin.gif /><span id=moeda></span></div>';
                            if($act=='add5'||$act=='add6'){
                                echo '<div align=right class=cadTitulo>Armaduras para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                                echo '<span class=nota>Coloque o mouse em cima dos quadradinhos para ver a descrição das armas.</span>';
                            }elseif($act=='add7'){
                                echo '<div align=right class=cadTitulo>Ítens para '.strtoupper($_GET['personagem']).'&nbsp&nbsp</div>';
                            }
                            echo '<div class=armascorporais>';
                            echo '<fieldsel>';
                            if($act=='add5'){
                                echo '<legend>Armaduras & Escudos</legend>';
                                echo '<img class=dist src=../web/imagens/itens/armaduras/armaduras.png />';
                            }elseif($act=='add6'){
                                echo '<legend>Itens de Conjuração</legend>';
                                echo '<img class=conj src=../web/imagens/itens/conjuracao/conjuracao.png />';
                                echo '<img height=310px class=conj2 src=../web/imagens/itens/conjuracao/conjuracao2.png />';
                            }elseif($act=='add7'){
                                echo '<legend>Itens Gerais</legend>';
                                $search->setpersonagem(null);
                                $search->settabela('tb_equipamento_geral');
                                $equipamentos=$dao->encontre($search);
                                echo '<table class=equipamentos><tr>';
                                    echo '<th>ITEM</th>';
                                    echo '<th>CUSTO</th>';
                                    echo '<th>PESO</th>';
                                    echo '<th>DESCRIÇÃO</th>';
                                    echo '<th>COMPRAR</th>';
                                echo '</tr>';
                                foreach($equipamentos as $item){
                                    echo '<tr>';
                                        echo '<td>'.$item->getitem().'</td>';
                                        echo '<td align=center>'.$item->getouro().'</td>';
                                        echo '<td align=center>'.$item->getpeso().'</td>';
                                        echo '<td>'.$item->getDESCRICAO().'</td>';
                                        echo '<td align=center><input type=checkbox class=armasCorp value='.$item->getouro().' name=\''.$item->getitem().'\'  /></td>';// onchange=moeda(\''.$recurso.'\')
                                    echo '</tr>';
                                }
                                echo '</table>';
                                echo '<script>moeda('.$recurso.')</script>';
                                echo '<div class="conclui">';
                                    echo '<input type="submit" value="CONCLUIR" class="botao botao-verde">';
                                    echo '<br><br>';
                                echo '</div>';
                                die;
                            }
                       //itens//
                            if($act=='add5'){
                                $listaArmas=array('Armadura Simples','Armadura de Batalha','Armadura Completa','Túnica Pesada','Escudo de Corpo','Escudo Médio','Escudo Pequeno','Armadura de Couro');
                                $search->settabela('tb_armaduras');
                            }elseif($act=='add6'){
                                $listaArmas=array('Cajado','Cetro','Grimório','Missal','Orbe de Cristal','Punhal','Símbolo Sagrado','Varinha');
                                $search->settabela('tb_conjuracao');
                            }
                            foreach($listaArmas as $item){
                                if($act=='add5'){
                                    $search->setarmadura($item);
                                    $armaduras=$dao->encontrePorArmadura($search);
                                    if($armaduras->getarmadura())
                                       $desc='Armadura: '.$armaduras->getarmadura()."\r\n";
                                    if($armaduras->getouro())
                                       $desc.='Custo: '.$armaduras->getouro()."\r\n";
                                    if($armaduras->getdefesa())
                                       $desc.='Defesa: '.$armaduras->getdefesa()."\r\n";
                                    if($armaduras->getFN())
                                       $desc.='FN: '.$armaduras->getFN()."\r\n";
                                    if($armaduras->getpeso())
                                       $desc.='Peso: '.$armaduras->getpeso()."\r\n";
                                    if($armaduras->getOBS())
                                       $desc.='Obs: '.$armaduras->getOBS();
                                    echo '<span class='.str_replace(' ','',$item).' >';
                                    $item = $item.'/'.$armaduras->getdefesa();
                                    $value=$armaduras->getouro();
                                }elseif($act=='add6'){
                                    $search->setARMA($item);
                                    $armaduras=$dao->encontrePorArma($search);
                                    if($armaduras->getARMA())
                                        $desc='Item: '.$armaduras->getARMA()."\r\n";
                                    if($armaduras->getouro())
                                        $desc .='Custo: '.$armaduras->getouro()."\r\n";
                                    if($armaduras->getFN())
                                        $desc .='FN: '.$armaduras->getFN()."\r\n";
                                    if($armaduras->getpeso())
                                        $desc .='Peso: '.$armaduras->getpeso()."\r\n";
                                    if($armaduras->getDESCRICAO())
                                        $desc .='Descrição: '.$armaduras->getDESCRICAO()."\r\n";
                                    if($armaduras->getOBS())
                                        $desc .='Obs: '.$armaduras->getOBS();
                                    echo '<span class='.str_replace(' ','',$item).' >';
                                        $value=$armaduras->getouro();
                                }
                                /// verifica se possui o recurso para compra ///
                                        echo '<input class=armasCorp type=checkbox value='.$value.' name=\''.$item.'\' title="'.$desc.'" />';//onchange=moeda(\''.$recurso.'\');
                                //////////
                                    echo '</span>';
                            }
                            if($act=='add6'){
                                echo '<span class=Cajado_ title="Pode ser usado em combate como um Bordão.">*</span>';
                                echo '<span class=Cetro_ title="Pode ser usado em combate como uma Clava.">*</span>';
                                echo '<span class=Punhal_ title="Pode ser usado em combate como uma Adaga.">*</span>';
                            }
                        ?>
                        <!--<script>moeda('<?= $recurso ?>');</script>-->
                        <input type="submit" value="AVANÇA" class='botao botao-verde'>&nbsp
                        <input type=button value="VOLTAR" onclick=history.go(-2) class='botao botao-verde'>&nbsp
                        <a href="../web/index.php?pagina=cadastro&act=<?= $add ?>&classe=<?= $_GET['classe'] ?>&raca=<?= $raca ?>&personagem=<?= $_GET['personagem'] ?>"><input type=button class='botao botao-verde' value=PULAR></a>
                        <br><br>
                    </table>
                </form>
            </fieldset>
        </div>
    <?php elseif($act=='add8'):
        echo '<div class=\'addFim\'>'.
             '<h3>PARABENS!<br>SUA FICHA ESTÁ COMPLETA.<br>BOM JOGO!</h3>';
             '</div>';
        //die;
    ?>
    <?php elseif($act=='avatar'):
        $dao = new Dao();
        $search = new ModelSearchCriteria();
        $search->settabela('tb_avatar');
        $search->setraca($raca);
        $avatares=$dao->encontrePorAvatar($search);
        switch($raca){
            case "halfling":
                $avatarFundo='halfling';
                break;
            case "humano":
                $avatarFundo='humano';
                break;
        }
        echo '<div id=\'avatar\'></div>';
        echo '<div class='.$avatarFundo.'Fundo>';
        $total= count($avatares);
        echo "<button onclick=mudaImagem('humano',1,$total);>Mudar Avatar</button>";
            foreach($avatares as $avatar){
                echo '<span class='.$raca.$avatar->getid().'>';
                echo '<input type=radio value='.$avatar->getid().' name=avatar />';
                echo '</span>';
            }
        echo '</div>';
        //die;
    ?>
    <?php endif; ?>
</div>
